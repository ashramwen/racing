(this.webpackJsonpracing=this.webpackJsonpracing||[]).push([[0],{100:function(e,n,t){},203:function(e,n,t){},204:function(e,n,t){"use strict";t.r(n);var i=t(5),r=t.n(i),a=t(94),o=t.n(a),c=(t(100),t(26)),l=t(0),u=t(205),s=t(206),f=t(1),v=(u.a,"".concat("/racing","/race/racing/scene/"));var p=function(){var e=!1,n=new l.Container;n.name="Background";var t=new l.Sprite(l.Texture.from("".concat(v,"sky.png"))),i=new l.extras.TilingSprite(l.Texture.from("".concat(v,"cloud0.png")),1150,34);i.y=10;var r=new l.extras.TilingSprite(l.Texture.from("".concat(v,"cloud1.png")),1150,29);r.y=41;var a=new l.extras.TilingSprite(l.Texture.from("".concat(v,"cloud2.png")),1150,33);a.y=16;var o=new l.extras.TilingSprite(l.Texture.from("".concat(v,"cloud3.png")),1150,34);o.y=22;var c=new l.extras.TilingSprite(l.Texture.from("".concat(v,"cloud4.png")),1150,51);c.y=14;var u=new l.extras.TilingSprite(l.Texture.from("".concat(v,"building.png")),1150,90);u.y=27;var p=new l.Sprite(l.Texture.from("".concat(v,"ocean.png")));p.y=109;var d=new l.extras.TilingSprite(l.Texture.from("".concat(v,"water.png")),1150,20);d.y=112;var x=new l.extras.TilingSprite(l.Texture.from("".concat(v,"grass.png")),1150,65);x.y=85;var g=new l.extras.TilingSprite(l.Texture.from("".concat(v,"fence.png")),1150,25);g.y=145;var w=new l.extras.TilingSprite(l.Texture.from("".concat(v,"boundary.png")),1150,4);w.y=170;var m=new l.extras.TilingSprite(l.Texture.from("".concat(v,"boundary2.png")),1150,6);m.y=624,n.addChild(m);var h=new l.extras.TilingSprite(l.Texture.from("".concat(v,"road.png")),1150,361);h.y=220,h.scale.x=2;var y=new l.Sprite(l.Texture.from("".concat(v,"starting_line.png")));y.x=900,y.y=174,n.addChild(t,i,r,a,o,c,u,p,d,x,g,h,y,w,m);var T=15,b=new l.ticker.Ticker;b.add((function(){i.tilePosition.x+=1.1,r.tilePosition.x+=1.2,a.tilePosition.x+=1.3,o.tilePosition.x+=1.4,c.tilePosition.x+=1.5,u.tilePosition.x+=2,d.tilePosition.x+=3,x.tilePosition.x+=10,g.tilePosition.x+=10,w.tilePosition.x+=30,m.tilePosition.x+=30,h.tilePosition.x+=20,e&&y.x>=-100?S():y.x+=T,e&&y.x>=100&&b.stop()}));var S=function(){s.a.to(y,1,{pixi:{x:y.x+150},ease:f.c.easeOut})};return n.start=function(){b.start(),e=!1,T=15,y.x=900},n.finish=function(){e=!0,T=30,y.x=-8700},n.init=function(){b.stop(),e=!1,T=15,y.x=900},n},d="".concat("/racing","/race/racing/timer/");var x=function(){var e=270,n=new l.Container({antialias:!0});n.name="Timer";for(var t=[],i=[],r=0;r<6;r++){var a=new l.Sprite(l.Texture.from("".concat(d,"red").concat(r,".png")));a.x=440,t.push(a);var o=new l.Sprite(l.Texture.from("".concat(d).concat(r,".png")));o.x=546,o.y=265,o.visible=!1,i.push(o)}var c=new l.Graphics;c.lineStyle(12,16724736),c.arc(577,315,90,-90*l.DEG_TO_RAD,e*l.DEG_TO_RAD);var u=new l.Sprite(l.Texture.from("".concat(d,"circle.png")));u.x=485,u.y=222,u.visible=!1,u.mask=c;var s=new l.Sprite(l.Texture.from("".concat(d,"eclipse.png")));s.x=485,s.y=222,s.visible=!1;var f=new l.Sprite(l.Texture.from("".concat(d,"start.png")));return f.x=443,f.y=285,f.visible=!1,n.addChild.apply(n,t.concat([s,u,c],i,[f])),n.start=function(){i[5].visible=!0,u.visible=!0,s.visible=!0;var n=(new Date).valueOf();!function e(){return setTimeout((function(){for(var r=5-Math.floor(((new Date).valueOf()-n)/1e3),a=0;a<=6;a++)i[a]&&(i[a].visible=a===r),t[a]&&(t[a].visible=a===r);-1===r?(s.visible=!1,f.visible=!0,e()):r<-1?(s.visible=!1,f.visible=!1):e()}),100)}();var r=(new Date).valueOf();!function n(){return setTimeout((function(){var t=Math.floor((new Date).valueOf()-r);e=-.072*t+270,c.clear(),c.lineStyle(12,16724736),c.arc(577,315,90,-90*l.DEG_TO_RAD,e*l.DEG_TO_RAD),e<=-90?u.visible=!1:n()}),10)}()},n.init=function(){t.forEach((function(e){return e.visible=!0})),i.forEach((function(e){return e.visible=!1}))},n},g=t(207),w=(u.a,"".concat("/racing","/race/racing/car/")),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:850;return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e))+e};var h=function(e){var n,t=Math.random()>=.5,i=m(4,8),r=m(),a=Math.pow(.98,10-e),o=new l.Container({antialias:!0});o.name="Car".concat(e),o.x=1e3-5.5*e,o.y=45*e+170;var c=new l.Sprite(l.Texture.from("".concat(w,"turbo0.png")));c.scale.set(a,a),c.x=151*a,c.y=25*a,c.visible=!1;var u=new l.Sprite(l.Texture.from("".concat(w,"turbo1.png")));u.scale.set(a,a),u.x=151*a,u.y=25*a,u.visible=!1;var f=new l.Sprite(l.Texture.from("".concat(w,"turbo2.png")));f.scale.set(a,a),f.x=148*a,f.y=22*a,f.visible=!1;var v=[c,u,f],p=0,d=new l.ticker.Ticker;d.add((function(){6===p?(p=0,c.visible=!0,u.visible=!u.visible):p++}));var x=new l.ticker.Ticker;x.add((function(){6===p?(p=0,u.visible=!0,f.visible=!f.visible):p++}));var h=[d,x],y=new l.Sprite(l.Texture.from("".concat(w,"car").concat(e,".png")));y.scale.set(a,a);var T=new l.Sprite(l.Texture.from("".concat(w,"wheel.png")));T.anchor.set(.49),T.scale.set(a,a),T.x=38*a,T.y=25*a;var b=new l.Sprite(l.Texture.from("".concat(w,"wheel.png")));b.anchor.set(.49),b.scale.set(a,a),b.x=130*a,b.y=25*a,o.addChild(v[0],v[1],v[2],y,T,b);var S=function(){v.forEach((function(e){return e.visible=!1})),h.forEach((function(e){return e.stop()}))},C=function(e,n,t,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.a.easeInOut,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new s.a(o,n,{pixi:{x:e},ease:r,onComplete:t,onStart:i,delay:a})},k=new l.ticker.Ticker,E=0;k.add((function(){E<5?E++:(E=0,y.y=y.y+(t?-1:1),t=!t)})),k.start();var O=new l.ticker.Ticker;return O.add((function(){T.rotation-=.5,b.rotation-=.5})),o.start=function(){!function e(){n=C(r,i,(function(){r=m(),i=m(4,8),e()}),(function(){S(),o.x-r>0&&(r<700||4===i?x.start():(r<800||5===i)&&d.start())}))}(),O.start()},o.finish=function(e){var t=e.onComplete;n.kill(),S(),n=C(m(550,700),5,(function(){x.start(),n=C(-200,.4,(function(){t&&t()}),(function(){return x.start()}),g.a.easeOut,1)}),(function(){return d.start()}))},o.stop=function(){O.stop(),k.stop(),n.kill(),S()},o.init=function(){S(),O.stop(),n&&n.kill(),o.x=1e3-5.5*e},o};var y=function(){var e=new l.Container;e.initialized=!1;for(var n=new p,t=new x,i=[],r=0;r<10;r++){var a=new h(r);i.push(a)}return e.addChild.apply(e,[n].concat(i,[t])),e.start=function(){t.start();var e=(new Date).valueOf();!function t(){return setTimeout((function(){Math.floor(((new Date).valueOf()-e)/1e3)>=6?(n.start(),i.forEach((function(e){return e.start()}))):t()}),100)}()},e.finish=function(e){var t=e.ranking,r=void 0===t?[]:t,a=e.onComplete;n.finish();var o=4,c=0,u=new l.ticker.Ticker;u.add((function(){var e=r[c]-1;o<2?o++:(9===c?(i[e].finish({onComplete:a}),u.stop()):i[e].finish({}),o=0,c++)})),u.start()},e.init=function(){e.initialized=!0,n.init(),t.init(),i.forEach((function(e){return e.init()}))},e},T="".concat("/racing","/race/award/scene/");var b=function(){var e=new l.Container({antialias:!0}),n=new l.Sprite(l.Texture.from("".concat(T,"bg.png"))),t=new l.Graphics;t.beginFill(0),t.drawRect(0,0,1150,630),t.endFill(),t.alpha=.7,t.visible=!1;var i=new l.Sprite(l.Texture.from("".concat(T,"mask_min.png")));i.visible=!1;var r=new l.Sprite(l.Texture.from("".concat(T,"filter.png")));return r.visible=!1,e.addChild(n,i,r),e.init=function(){i.visible=!1,r.visible=!1},e.fade=function(){i.visible=!0},e.spotlight=function(){r.visible=!0},e},S=(u.a,"".concat("/racing","/race/award/car/")),C=[{initialX:575,expectedX:575,expectedY:400,expectedScale:1},{initialX:565,expectedX:275,expectedY:360,expectedScale:.9},{initialX:585,expectedX:855,expectedY:320,expectedScale:.8}],k=[{x:575,y:225},{x:275,y:200},{x:855,y:170}],E=["\u51a0\u519b","\u4e9a\u519b","\u5b63\u519b"];var O=function(e){var n=e.onComplete,t=[38,38,40,40,37,39,37,39,65,66,65,66],i=0,r=new l.Container({antialias:!0}),a=[],o=[],c=[],u=[],v=new l.Sprite(l.Texture.from("".concat(S,"miku.png")));v.scale.set(.5,.5),v.x=170,v.y=140,v.visible=!1,window.addEventListener("keydown",(function(e){e.keyCode===t[i]?i++:i=0}),!1);for(var p=0;p<10;p++){var d=new l.Sprite(l.Texture.from("".concat(S,"car").concat(p,".png")));d.anchor.set(.5),o.push(d)}for(var x=0;x<3;x++){var g=new l.Sprite(l.Texture.from("".concat(S,"crown").concat(x,".png")));g.anchor.set(.5),g.x=k[x].x,g.y=k[x].y,g.visible=!1,c.push(g);var w=new l.Text("",new l.TextStyle({fill:16777215,fontSize:62,fontFamily:"Arial"}));w.y=10,w.anchor.set(.5),u.push(w);var m=new l.Text(E[x],new l.TextStyle({fill:16441468,fontSize:12,fontFamily:"PingFangSC-Regular"}));m.y=-25,m.anchor.set(.5),g.addChild(w,m)}r.addChild.apply(r,c.concat([v])),r.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v.visible=!1,i=0,!1,a.forEach((function(e){return r.removeChild(e)})),c.forEach((function(e){return e.visible=!1})),a=[];for(var n=0;n<3;n++){var t=o[+e[n]-1];t.x=C[n].initialX,t.y=220,t.scale.set(.1,.1),a.push(t),r.addChildAt(t,0),u[n].text=e[n]}h()};var h=function(){var e=0;s.a.to(a,.01,{repeat:3,repeatDelay:.2,onRepeat:function(){var n=e;s.a.to(a[e],3,{pixi:{scale:C[e].expectedScale,x:C[e].expectedX,y:C[e].expectedY},repeatDelay:.5,ease:f.c.easeOut,onComplete:function(){s.a.to(a[n],.1,{pixi:{y:C[n].expectedY-2}})}}),e++},onComplete:function(){s.a.set(c,{delay:3,onStart:function(){n(),!0}})}})};return r.ranking=function(){var e=1;c[0].visible=!0,s.a.to(c,.1,{repeat:2,repeatDelay:.5,onRepeat:function(){c[e++].visible=!0}})},r},D=(u.a,"".concat("/racing","/race/award/scene/"));var P=function(){var e=[],n=new l.Container,t=new l.Sprite(l.Texture.from("".concat(D,"scoreboard.png")));t.y=630;for(var i=0;i<10;i++){var r=new l.Text("",new l.TextStyle({fill:16777215,fontSize:28,fontFamily:"Arial"}));r.x=466+54.95*i,r.y=40,r.anchor.set(.5),e.push(r)}var a=new l.Text("",new l.TextStyle({fill:16777215,fontSize:16,fontFamily:"PingFangSC-Regular"}));return a.x=180,a.y=27,t.addChild.apply(t,[a].concat(e)),n.addChild(t),n.init=function(n){t.y=630,a.text="\u6bd4\u8cfd\u7d50\u679c",n.forEach((function(n,t){e[t].text=n}))},n.go=function(){s.a.to(t,.5,{pixi:{y:560}})},n};u.a;var R=function(){var e=new l.Container,n=new b,t=new O({onComplete:function(){n.fade(),s.a.set(n,{delay:.5,onComplete:function(){n.spotlight(),t.ranking()}}),s.a.set(n,{delay:2,onComplete:function(){return i.go()}})}}),i=new P;return e.addChild(n,t,i),e.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.init(),t.init(e),i.init(e)},e};var M,_=function(){var e=new l.Application({width:1150,height:630,backgroundColor:2236962}),n=new y,t=new R;return t.visible=!1,e.stage.addChild(n,t),{view:e.view,init:function(){t.visible=!1,n.init()},start:function(){t.visible=!1,n.start()},finish:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.finish({ranking:e,onComplete:function(){t.visible=!0,t.init(e)}})},initialized:function(){return n.initialized},destroy:function(){return e.destroy(!0)}}},A=function(e){var n=e.ranking,t=r.a.createRef(),a=Object(i.useCallback)((function(e){return 10===e.length&&!e.find((function(e){var n=Number(e);return!Number.isInteger(Number(n))||n>10||n<0}))}),[]);return Object(i.useEffect)((function(){return M||(M=new _,t.current.appendChild(M.view)),function(){M.destroy(),M=null}}),[t]),Object(i.useEffect)((function(){var e=null===n||void 0===n?void 0:n.split(",");a(e)&&(M.init(),M.start(),setTimeout((function(){return M.finish(e)}),2e4))}),[a,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas",ref:t}))},F=(t(203),[1,2,3,4,5,6,7,8,9,10]);var j=function(e){var n=e.setRanking,t=Object(i.useState)(""),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",value:o,onChange:function(e){l(e.target.value)},readOnly:!0}),r.a.createElement("button",{onClick:function(){var e=F.sort((function(){return Math.random()-.5})).join(",");l(e),n(e)}},"Go!"))};var z=function(){var e=Object(i.useState)(""),n=Object(c.a)(e,2),t=n[0],a=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(A,{ranking:t}),r.a.createElement(j,{setRanking:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,n,t){e.exports=t(204)}},[[95,1,2]]]);
//# sourceMappingURL=main.5ec9b4a2.chunk.js.map